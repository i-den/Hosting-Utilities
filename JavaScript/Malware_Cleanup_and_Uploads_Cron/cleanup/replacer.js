const fs = require("fs");
const path = require("path");

const txtToDelete = [
    ``,
    ``,
    ``,
    ``,
    ``,
    ``,
    ``,
    ``
];

let filesToReplace = fs.readFileSync(__dirname + path.sep + "injected_files.txt")
    .toString()
    .split("\n");

for (let fileToReplace of filesToReplace) {
    if (fileToReplace === "") {
        continue;
    }
    try {
        fs.writeFileSync(fileToReplace, getCleanFileContents(fileToReplace));
    } catch (e) {
        console.log(e);
        console.log(`Failed to replace file ${fileToReplace}`);
    }
}

function getCleanFileContents(filePath) {
    let fileTxt = fs.readFileSync(filePath).toString();
    for (let strToDel of txtToDelete) {
        while (fileTxt.includes(strToDel)) {
            fileTxt = fileTxt.replace(strToDel, "");
        }
    }
    return fileTxt.trim();
}